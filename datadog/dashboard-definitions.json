{
  "title": "Attendance Dashboard - Performance Monitoring",
  "description": "Comprehensive performance monitoring for the attendance dashboard application with 95th percentile latency, TTFB, memory usage, and error rates",
  "template_variables": [
    {
      "name": "env",
      "prefix": "env",
      "available_values": ["development", "staging", "production"],
      "default": "production"
    },
    {
      "name": "service",
      "prefix": "service",
      "available_values": ["attendance-dashboard-backend", "attendance-dashboard-frontend"],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "widgets": [
    {
      "id": 1,
      "definition": {
        "type": "group",
        "title": "üìä Application Health Overview",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 11,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "avg:trace.express.request.duration.by.service.95p{env:$env,service:attendance-dashboard-backend}",
                  "aggregator": "last",
                  "conditional_formats": [
                    {
                      "comparator": "<",
                      "value": 200,
                      "palette": "green_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 200,
                      "palette": "yellow_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 500,
                      "palette": "red_on_white"
                    }
                  ]
                }
              ],
              "title": "üöÄ 95p API Latency (ms)",
              "title_size": "16",
              "title_align": "center",
              "precision": 0
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 12,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "avg:rum.loading_time.first_byte.95p{env:$env,application_id:*}",
                  "aggregator": "last",
                  "conditional_formats": [
                    {
                      "comparator": "<",
                      "value": 300,
                      "palette": "green_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 300,
                      "palette": "yellow_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 800,
                      "palette": "red_on_white"
                    }
                  ]
                }
              ],
              "title": "‚è±Ô∏è 95p TTFB (ms)",
              "title_size": "16",
              "title_align": "center",
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 13,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "avg:process.memory.rss{env:$env,service:attendance-dashboard-backend}",
                  "aggregator": "last",
                  "conditional_formats": [
                    {
                      "comparator": "<",
                      "value": 134217728,
                      "palette": "green_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 134217728,
                      "palette": "yellow_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 268435456,
                      "palette": "red_on_white"
                    }
                  ]
                }
              ],
              "title": "üíæ Memory Usage (MB)",
              "title_size": "16",
              "title_align": "center",
              "precision": 0,
              "custom_unit": "B"
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 14,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "sum:trace.express.request.errors{env:$env,service:attendance-dashboard-backend}.as_rate()",
                  "aggregator": "last",
                  "conditional_formats": [
                    {
                      "comparator": "<",
                      "value": 0.05,
                      "palette": "green_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 0.05,
                      "palette": "yellow_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 0.1,
                      "palette": "red_on_white"
                    }
                  ]
                }
              ],
              "title": "‚ùå Error Rate (%)",
              "title_size": "16",
              "title_align": "center",
              "precision": 2
            },
            "layout": {
              "x": 9,
              "y": 0,
              "width": 3,
              "height": 2
            }
          }
        ]
      }
    },
    {
      "id": 2,
      "definition": {
        "type": "group",
        "title": "üöÄ Backend Performance Metrics",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 21,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:trace.express.request.duration.by.service.95p{env:$env,service:attendance-dashboard-backend}",
                  "display_type": "line",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:trace.express.request.duration.by.service.95p{env:$env,service:attendance-dashboard-backend}",
                      "alias_name": "95p Latency"
                    }
                  ]
                },
                {
                  "q": "avg:trace.express.request.duration.by.service.99p{env:$env,service:attendance-dashboard-backend}",
                  "display_type": "line",
                  "style": {
                    "palette": "orange",
                    "line_type": "dashed",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:trace.express.request.duration.by.service.99p{env:$env,service:attendance-dashboard-backend}",
                      "alias_name": "99p Latency"
                    }
                  ]
                }
              ],
              "title": "API Response Latency (95p & 99p)",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y = 200",
                  "display_type": "error dashed",
                  "label": "SLA Target (200ms)"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 22,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "sum:trace.express.request.hits{env:$env,service:attendance-dashboard-backend}.as_rate()",
                  "display_type": "bars",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "metadata": [
                    {
                      "expression": "sum:trace.express.request.hits{env:$env,service:attendance-dashboard-backend}.as_rate()",
                      "alias_name": "Requests/sec"
                    }
                  ]
                }
              ],
              "title": "Request Throughput",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "req/s",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 23,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:process.memory.rss{env:$env,service:attendance-dashboard-backend}",
                  "display_type": "line",
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:process.memory.rss{env:$env,service:attendance-dashboard-backend}",
                      "alias_name": "RSS Memory"
                    }
                  ]
                },
                {
                  "q": "avg:process.memory.heap_used{env:$env,service:attendance-dashboard-backend}",
                  "display_type": "line",
                  "style": {
                    "palette": "cool",
                    "line_type": "dashed",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:process.memory.heap_used{env:$env,service:attendance-dashboard-backend}",
                      "alias_name": "Heap Used"
                    }
                  ]
                }
              ],
              "title": "Memory Usage Over Time",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "Bytes",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y = 134217728",
                  "display_type": "warning dashed",
                  "label": "128MB Warning"
                },
                {
                  "value": "y = 268435456",
                  "display_type": "error dashed",
                  "label": "256MB Critical"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 24,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "sum:trace.express.request.errors{env:$env,service:attendance-dashboard-backend}.as_rate()",
                  "display_type": "bars",
                  "style": {
                    "palette": "red"
                  },
                  "metadata": [
                    {
                      "expression": "sum:trace.express.request.errors{env:$env,service:attendance-dashboard-backend}.as_rate()",
                      "alias_name": "Error Rate"
                    }
                  ]
                }
              ],
              "title": "Error Rate Over Time",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "errors/s",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 6,
              "y": 3,
              "width": 6,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 3,
      "definition": {
        "type": "group",
        "title": "üåê Frontend Performance (RUM)",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 31,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:rum.loading_time.first_byte.95p{env:$env,application_id:*}",
                  "display_type": "line",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "thick"
                  },
                  "metadata": [
                    {
                      "expression": "avg:rum.loading_time.first_byte.95p{env:$env,application_id:*}",
                      "alias_name": "95p TTFB"
                    }
                  ]
                }
              ],
              "title": "Time to First Byte (95p)",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "ms",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y = 300",
                  "display_type": "warning dashed",
                  "label": "Good (300ms)"
                },
                {
                  "value": "y = 800",
                  "display_type": "error dashed",
                  "label": "Poor (800ms)"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 32,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:rum.largest_contentful_paint.95p{env:$env,application_id:*}",
                  "display_type": "line",
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:rum.largest_contentful_paint.95p{env:$env,application_id:*}",
                      "alias_name": "LCP"
                    }
                  ]
                },
                {
                  "q": "avg:rum.first_input_delay.95p{env:$env,application_id:*}",
                  "display_type": "line",
                  "style": {
                    "palette": "blue",
                    "line_type": "dashed",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:rum.first_input_delay.95p{env:$env,application_id:*}",
                      "alias_name": "FID"
                    }
                  ]
                }
              ],
              "title": "Core Web Vitals (LCP & FID)",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "ms",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y = 2500",
                  "display_type": "warning dashed",
                  "label": "LCP Good (2.5s)"
                },
                {
                  "value": "y = 100",
                  "display_type": "ok dashed",
                  "label": "FID Good (100ms)"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 33,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:rum.cumulative_layout_shift.95p{env:$env,application_id:*}",
                  "display_type": "line",
                  "style": {
                    "palette": "orange",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:rum.cumulative_layout_shift.95p{env:$env,application_id:*}",
                      "alias_name": "CLS"
                    }
                  ]
                }
              ],
              "title": "Cumulative Layout Shift (CLS)",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "score",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y = 0.1",
                  "display_type": "warning dashed",
                  "label": "Good (0.1)"
                },
                {
                  "value": "y = 0.25",
                  "display_type": "error dashed",
                  "label": "Poor (0.25)"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 34,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "sum:rum.action.count{env:$env,application_id:*,action.type:custom}.as_rate()",
                  "display_type": "bars",
                  "style": {
                    "palette": "purple"
                  },
                  "metadata": [
                    {
                      "expression": "sum:rum.action.count{env:$env,application_id:*,action.type:custom}.as_rate()",
                      "alias_name": "User Actions/sec"
                    }
                  ]
                }
              ],
              "title": "User Interactions Rate",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "actions/s",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 6,
              "y": 3,
              "width": 6,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 4,
      "definition": {
        "type": "group",
        "title": "üóÑÔ∏è Database & Infrastructure",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 41,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:trace.postgres.query.duration.by.service.95p{env:$env,service:attendance-dashboard-backend}",
                  "display_type": "line",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:trace.postgres.query.duration.by.service.95p{env:$env,service:attendance-dashboard-backend}",
                      "alias_name": "95p Query Time"
                    }
                  ]
                }
              ],
              "title": "Database Query Performance (95p)",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "ms",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y = 100",
                  "display_type": "warning dashed",
                  "label": "Slow Query (100ms)"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 42,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:redis.info.used_memory{env:$env}",
                  "display_type": "line",
                  "style": {
                    "palette": "red",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "avg:redis.info.used_memory{env:$env}",
                      "alias_name": "Redis Memory"
                    }
                  ]
                }
              ],
              "title": "Redis Memory Usage",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "Bytes",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 43,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "avg:system.cpu.user{env:$env,service:attendance-dashboard-backend}",
                  "display_type": "area",
                  "style": {
                    "palette": "cool"
                  },
                  "metadata": [
                    {
                      "expression": "avg:system.cpu.user{env:$env,service:attendance-dashboard-backend}",
                      "alias_name": "CPU Usage"
                    }
                  ]
                }
              ],
              "title": "CPU Usage",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "%",
                "scale": "linear",
                "min": "0",
                "max": "100"
              },
              "markers": [
                {
                  "value": "y = 80",
                  "display_type": "warning dashed",
                  "label": "High CPU (80%)"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 44,
            "definition": {
              "type": "query_table",
              "requests": [
                {
                  "q": "top(avg:trace.express.request.duration.by.resource{env:$env,service:attendance-dashboard-backend} by {resource}, 10, 'mean', 'desc')",
                  "aggregator": "avg",
                  "limit": 10
                }
              ],
              "title": "Slowest API Endpoints",
              "title_size": "16",
              "title_align": "left"
            },
            "layout": {
              "x": 6,
              "y": 3,
              "width": 6,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 5,
      "definition": {
        "type": "group",
        "title": "üìà Business Metrics",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 51,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "sum:attendance.upload.success{env:$env}.as_rate()",
                  "display_type": "bars",
                  "style": {
                    "palette": "green"
                  },
                  "metadata": [
                    {
                      "expression": "sum:attendance.upload.success{env:$env}.as_rate()",
                      "alias_name": "Successful Uploads"
                    }
                  ]
                },
                {
                  "q": "sum:attendance.upload.failed{env:$env}.as_rate()",
                  "display_type": "bars",
                  "style": {
                    "palette": "red"
                  },
                  "metadata": [
                    {
                      "expression": "sum:attendance.upload.failed{env:$env}.as_rate()",
                      "alias_name": "Failed Uploads"
                    }
                  ]
                }
              ],
              "title": "File Upload Success/Failure Rate",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "uploads/min",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 52,
            "definition": {
              "type": "timeseries",
              "requests": [
                {
                  "q": "sum:attendance.processing.time{env:$env}",
                  "display_type": "line",
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "metadata": [
                    {
                      "expression": "sum:attendance.processing.time{env:$env}",
                      "alias_name": "Processing Time"
                    }
                  ]
                }
              ],
              "title": "Attendance Data Processing Time",
              "title_size": "16",
              "title_align": "left",
              "yaxis": {
                "label": "ms",
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 53,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "sum:rum.session.count{env:$env,application_id:*}",
                  "aggregator": "sum"
                }
              ],
              "title": "üë• Active User Sessions",
              "title_size": "16",
              "title_align": "center",
              "precision": 0
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 54,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "sum:attendance.records.processed{env:$env}",
                  "aggregator": "sum"
                }
              ],
              "title": "üìä Records Processed (24h)",
              "title_size": "16",
              "title_align": "center",
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 3,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 55,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "sum:attendance.duplicate.detected{env:$env}",
                  "aggregator": "sum"
                }
              ],
              "title": "üîç Duplicates Detected",
              "title_size": "16",
              "title_align": "center",
              "precision": 0
            },
            "layout": {
              "x": 6,
              "y": 3,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 56,
            "definition": {
              "type": "query_value",
              "requests": [
                {
                  "q": "(sum:attendance.upload.success{env:$env}/(sum:attendance.upload.success{env:$env}+sum:attendance.upload.failed{env:$env}))*100",
                  "aggregator": "last",
                  "conditional_formats": [
                    {
                      "comparator": ">=",
                      "value": 95,
                      "palette": "green_on_white"
                    },
                    {
                      "comparator": ">=",
                      "value": 90,
                      "palette": "yellow_on_white"
                    },
                    {
                      "comparator": "<",
                      "value": 90,
                      "palette": "red_on_white"
                    }
                  ]
                }
              ],
              "title": "‚úÖ Upload Success Rate (%)",
              "title_size": "16",
              "title_align": "center",
              "precision": 2
            },
            "layout": {
              "x": 9,
              "y": 3,
              "width": 3,
              "height": 2
            }
          }
        ]
      }
    }
  ]
}
